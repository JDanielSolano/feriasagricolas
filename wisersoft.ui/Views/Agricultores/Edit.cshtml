@model WiserSoft.UI.Models.Agricultores

@{
    ViewBag.Title = "Editar";
}



@using (Html.BeginForm("Edit","Agricultores", FormMethod.Post,new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()

    <input type="text" id="valorcillo" value="@ViewData["idCanton"]" style="display:none" />

    <div id="page-wrapper">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">
                        Edición
                    </h1>
                    <ol class="breadcrumb">
                        <li>
                            <i class="fa fa-fw fa-child"></i> @Html.ActionLink("Agricultores", "Index", "Agricultores")
                        </li>
                        <li class="active">
                            <i class="fa fa-edit"></i> Editar agricultor
                        </li>
                    </ol>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-6">
                    <form role="form">
                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                        <br />
                        <div class="form-group input-group col-md-10">
                            @Html.Label("Cedula", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.Agr_Cedula, new { htmlAttributes = new { @class = "form-control", disable ="true" } })
                                @Html.ValidationMessageFor(model => model.Agr_Cedula, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <br />
                        <div class="form-group form-group input-group col-md-10">
                            @Html.Label("Nombre", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.Agr_Nombre, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.Agr_Nombre, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <br />
                        <div class="form-group input-group col-md-10">
                            @Html.Label("Apellidos", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.Agr_Apellidos, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.Agr_Apellidos, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <br />
                        <div class="form-group input-group col-md-10">
                            @Html.Label("Alias", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.Agr_Alias, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.Agr_Alias, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <br />
                        <div class="form-group input-group col-md-10">
                            @Html.Label("Descripcion", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.Agr_Descripcion, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.Agr_Descripcion, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group input-group col-md-10">
                            @Html.Label("Provincia", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.DropDownList("Provincia",
                               new SelectList(ViewBag.Provincia, "Value", "Text"),
                               "Seleccione una provincia:",
                               new { @class = "form-control", @onchange = "BuscarCantones()" })
                            </div>
                        </div>
                        <br />
                        <div class="form-group input-group col-md-10">
                            @Html.Label("Canton", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.DropDownList("Canton",
                               new SelectList(ViewBag.Cantones, "Value", "Text"),
                               "Seleccione un canton",
                               new { @class = "form-control", @onchange = "BuscarDistritos()" })
                            </div>
                        </div>
                        <br />
                        <div class="form-group input-group col-md-10">
                            @Html.Label("Distrito", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.DropDownListFor(model => model.Agr_Distrito,
                               new SelectList(ViewBag.Distritos, "Value", "Text"),
                               "Seleccione un distrito",
                               new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.Agr_Distrito, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <br />
                        <div class="form-group input-group col-md-10">
                            @Html.Label("Telefono", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.Agr_Telefono, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.Agr_Telefono, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <br />
                        <div class="form-group input-group col-md-10">
                            @Html.Label("Feria a la que asiste", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.DropDownListFor(model => model.Agr_Feria_A_La_Que_Asiste,
                                new SelectList(ViewBag.Ferias, "Value", "Text"),
                                "Seleccione una feria:",
                                new { @class = "form-control", @onchange = "" })
                                @Html.ValidationMessageFor(model => model.Agr_Feria_A_La_Que_Asiste, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <br />
                        <div class="form-group input-group col-md-10">
                            @Html.Label("Foto", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                <input type="file" name="Photo" id="Photo" />
                            </div>
                        </div>
                        <br />
                        <div class="form-group input-group col-md-10">
                            @Html.Label("Activo", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.CheckBox("switch", true)
                            </div>
                        </div>
                        <br />
                        <div class="form-group">
                            <div class="col-md-offset-1 col-md-10">
                                <button class="btn btn-custom" onclick="location.href='@Url.Action("Index", "Agricultores")';return false;"><i class="fa fa-arrow-left"></i> Volver</button>
                                <input type="submit" value="Editar dato" class="btn btn-custom" />
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
}


@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script src="~/Scripts/Ferias_Agricolas/jquery-1.7.1.min.js"></script>
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>


    <script>


        function BuscarCantones() {
            var Pro_id = $('#Provincia').val();
            $.ajax(
                {
                    url: '/Agricultores/BuscarCantones',
                    type: "GET",
                    dataType: "JSON",
                    data: { idProvincia: Pro_id },
                    success: function (selectCantones) {
                        $("#Canton").html(""); // clear before appending new list
                        $("#Canton").append($('<option></option>').val("").html("Seleccione un canton:"));
                        $.each(selectCantones, function (i, canton) {
                            $("#Canton").append($('<option></option>').val(canton.Value).html(canton.Text));
                        });
                    },
                    error: function (xhr, status, error) {
                        alert(xhr.responseText);
                    }
                });
        }

        function BuscarDistritos() {
            var Cant_id = $('#Canton').val();
            $.ajax(
                {
                    url: '/Agricultores/BuscarDistritos',
                    type: "GET",
                    dataType: "JSON",
                    data: { idCanton: Cant_id },
                    success: function (selectDistritos) {
                        $("#Agr_Distrito").html(""); // clear before appending new list
                        $("#Agr_Distrito").append($('<option></option>').val("").html("Seleccione un distrito:"));
                        $.each(selectDistritos, function (i, distrito) {
                            $("#Agr_Distrito").append($('<option></option>').val(distrito.Value).html(distrito.Text));
                        });
                    },
                    error: function (xhr, status, error) {
                        alert(xhr.responseText);
                    }
                });

        }
    </script>
}
